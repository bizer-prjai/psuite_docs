# Zoom会議管理システム ヘルプページ

## システムの概要

Zoom会議管理システムは、複数のZoomアカウントを効率的に管理し、会議の予約・運営を自動化するWebアプリケーションです。

### 主な特徴
- **複数Zoomアカウント管理**: 複数のZoomアカウントを一元管理し、優先順位に基づいて自動的に会議を割り当て
- **自動会議作成**: 予約時に自動的にZoom会議を作成し、参加URLとパスワードを発行
- **公開予約システム**: 外部ユーザーがログイン不要で会議を予約できる公開URLを発行
- **IPアドレス制限**: 管理者および公開予約へのアクセスをIPアドレスで制限し、セキュリティを強化
- **トークン暗号化**: ZoomのOAuth認証トークンを暗号化して安全に保存
- **メール通知**: 予約確認メールの自動送信
- **柔軟な設定**: 会議の前後バッファ時間、許可メールドメイン、IPアドレス制限などの詳細設定

### システム構成
- **フロントエンド**: Next.js (React) + TypeScript
- **バックエンド**: Ruby on Rails
- **データベース**: PostgreSQL
- **キャッシュ**: Redis
- **バックグラウンド処理**: Sidekiq
- **メール送信**: SendGrid

---

## 各機能の概要

### 1. ユーザー管理・認証
- ユーザー登録・ログイン機能
- 管理者・一般ユーザーの役割管理
- セッション管理とセキュリティ

### 2. Zoomアカウント管理
- Zoom OAuth連携による安全なアカウント接続
- 複数アカウントの優先順位設定
- アカウントの有効化・無効化
- トークンの自動更新

### 3. 会議予約管理
- 詳細な会議情報の入力・管理
- 自動的なZoom会議作成
- 予約状況の追跡（予定・進行中・完了・キャンセル）
- 参加者管理

### 4. システム設定
- 会議前後のバッファ時間設定
- 公開予約URL管理
- 許可メールドメイン制限
- 許可IPアドレス制限
- 個人設定の管理

### 5. セキュリティ機能
- IPアドレス許可リスト管理
- 管理者アクセス制限
- 公開予約アクセス制限
- OAuth認証トークンの暗号化

### 6. 公開予約システム
- トークンベースの公開URL
- 外部ユーザー向けの予約フォーム
- 認証不要の簡単予約

### 7. 通知システム
- 予約確認メールの自動送信
- 各種イベント通知
- SendGrid連携

---

## 各機能の使い方

### 1. 初期セットアップ

#### 1.1 ユーザー登録・ログイン
1. システムにアクセスし、ユーザー登録を行います
2. メールアドレスとパスワードを設定してアカウントを作成
3. ログイン画面からシステムにアクセス

#### 1.2 Zoomアカウントの接続
1. **Zoomアカウント管理**ページにアクセス
2. 「Zoom認証」ボタンをクリック
3. Zoomの認証画面でアカウントを承認
4. 複数のZoomアカウントがある場合は、同様の手順で追加接続

### 2. Zoomアカウント管理

#### 2.1 アカウント一覧の確認
- **Zoomアカウント**ページで接続済みアカウントを確認
- アカウント名、メールアドレス、優先順位、状態を表示

#### 2.2 優先順位の設定
1. アカウント一覧で「↑」「↓」ボタンを使用して優先順位を調整
2. 上位のアカウントから優先的に会議が割り当てられます
3. 変更は自動的に保存されます

#### 2.3 アカウントの有効化・無効化
1. アカウント一覧でスイッチをクリックして有効/無効を切り替え
2. 無効化されたアカウントは会議割り当ての対象外になります

#### 2.4 アカウントの削除
1. アカウント一覧で「削除」ボタンをクリック
2. 確認ダイアログで削除を承認
3. Zoom側の認証も自動的に取り消されます

### 3. 会議予約管理

#### 3.1 予約一覧の確認
- **会議予約**ページで現在の予約状況を確認
- 予約日時、タイトル、申請者情報、使用Zoomアカウントを表示

#### 3.2 予約の詳細情報
各予約には以下の情報が含まれます：
- **基本情報**: タイトル、説明、開始・終了時間
- **申請者情報**: 部署、社員番号、氏名、メールアドレス
- **会議情報**: 会議ID、参加URL、パスワード
- **ステータス**: 予定・進行中・完了・キャンセル

### 4. システム設定

#### 4.1 予約の前後ロック時間設定
1. **システム設定**ページにアクセス
2. 「予約の前後ロック時間」セクションで時間を選択（0分、30分、60分）
3. 設定は自動的に保存されます

**用途**: 会議の前後に他の予約を入れないバッファ時間を設定

#### 4.2 外部公開予約URL管理

##### URL の作成
1. **システム設定**ページの「外部公開予約URL」セクション
2. 表示名（任意）を入力
3. 「発行」ボタンをクリックしてURLを生成

##### URL の管理
- 作成されたURLは一覧表示されます
- 「コピー」ボタンでURLをクリップボードにコピー
- 「削除」ボタンでURLを無効化

##### URL の共有
- 生成されたURLを外部ユーザーに共有
- 受け取った人はログイン不要で会議予約が可能

#### 4.3 許可メールドメイン設定

##### ドメインの追加
1. **システム設定**ページの「許可メールドメイン」セクション
2. ドメイン名を入力（例: company.com）
3. 「追加」ボタンをクリック

##### ドメインの削除
- 設定済みドメインの「×」ボタンをクリックして削除

**注意**: ドメイン制限を設定すると、指定されたドメインのメールアドレスのみ予約可能になります

#### 4.4 許可IPアドレス設定

##### IPアドレスの追加
1. **システム設定**ページの「許可IPアドレス」セクション
2. IPアドレスをCIDR記法で入力（例: 192.168.1.100/32、203.0.113.0/24）
3. 必要に応じてメモを入力（例: 本社オフィス、営業所など）
4. 「追加」ボタンをクリック

##### IPアドレスの管理
- 追加されたIPアドレスは一覧表示されます
- スイッチで個別に有効/無効を切り替え可能
- 「削除」ボタンでIPアドレスを完全に削除

##### CIDR記法について
- **単一IP**: `192.168.1.100/32` - 特定の1つのIPアドレス
- **サブネット**: `192.168.1.0/24` - 192.168.1.0～192.168.1.255の範囲
- **IPv6対応**: `2001:db8::/32` - IPv6アドレスも設定可能

##### アクセス制限の適用範囲
- **管理者アクセス**: ログイン後の全ての管理機能
- **公開予約**: 外部公開URLからの予約フォームアクセス
- **制限なし**: IPアドレスが未設定の場合は全てのアクセスを許可

**注意**: IPアドレス制限を有効にすると、許可されていないIPからのアクセスは拒否されます

### 5. 公開予約システムの利用

#### 5.1 外部ユーザーによる予約（公開URL経由）
1. 管理者から共有された公開URLにアクセス
2. 予約フォームに必要事項を入力：
   - 会議タイトル
   - 部署名
   - 社員番号
   - 氏名
   - メールアドレス
   - 開始日時
   - 会議時間（30分、60分、90分、120分）
   - 説明（任意）

3. 「予約する」ボタンをクリック
4. 予約完了後、会議情報（URL、パスワード）が表示されます
5. 確認メールが自動送信されます

#### 5.2 予約時の自動処理
- システムが利用可能なZoomアカウントを自動選択
- Zoom会議を自動作成
- 会議URL、ID、パスワードを自動生成
- 予約確認メールを申請者に送信

### 6. 運用のベストプラクティス

#### 6.1 Zoomアカウントの管理
- **複数アカウント**: 同時開催数を増やすため複数のZoomアカウントを接続
- **優先順位**: よく使用するアカウントを上位に設定
- **定期確認**: アカウントの接続状態を定期的に確認

#### 6.2 予約管理
- **バッファ時間**: 会議間の準備時間として30分程度の設定を推奨
- **ドメイン制限**: セキュリティ向上のため社内ドメインのみに制限
- **公開URL**: 用途別に複数のURLを作成して管理

#### 6.3 セキュリティ
- **定期的なパスワード変更**: ユーザーアカウントのパスワードを定期更新
- **IPアドレス制限**: 信頼できるネットワークからのみアクセスを許可
- **アクセス制限**: 必要に応じて許可メールドメインを設定
- **URL管理**: 不要になった公開URLは速やかに削除
- **ネットワークセキュリティ**: VPNや固定IPを活用したアクセス制御
- **トークン保護**: OAuth認証情報は自動的に暗号化されて保存

### 7. トラブルシューティング

#### 7.1 Zoom認証エラー
**症状**: Zoomアカウントの接続に失敗する
**対処法**:
1. Zoomアカウントの認証情報を確認
2. ブラウザのキャッシュをクリア
3. 別のブラウザで試行
4. Zoom側の設定を確認

#### 7.2 会議作成エラー
**症状**: 予約時に会議が作成されない
**対処法**:
1. Zoomアカウントの接続状態を確認
2. アカウントの有効性をチェック
3. Zoomの利用制限を確認
4. システム管理者に連絡

#### 7.3 メール送信エラー
**症状**: 確認メールが届かない
**対処法**:
1. メールアドレスの入力を確認
2. スパムフォルダを確認
3. ドメイン制限設定を確認
4. SendGrid設定を確認

#### 7.4 予約の重複・競合
**症状**: 同じ時間帯に複数の予約が入る
**対処法**:
1. バッファ時間の設定を確認
2. Zoomアカウントの数を増やす
3. 予約状況を定期的に確認

#### 7.5 IPアドレス制限エラー
**症状**: 「ip_not_allowed」エラーでアクセスが拒否される
**対処法**:
1. 現在のIPアドレスを確認（ipconfig、ifconfig等）
2. システム設定で許可IPアドレスに追加
3. CIDR記法が正しいか確認
4. VPN接続の確認
5. ネットワーク管理者に相談

**症状**: CIDR記法の入力エラー
**対処法**:
1. 正しい形式で入力（例: 192.168.1.0/24）
2. IPv4は/0～/32、IPv6は/0～/128の範囲で指定
3. 不明な場合は単一IP（/32）で設定

### 8. よくある質問（FAQ）

#### Q1: 同時に何件まで会議を開催できますか？
A1: 接続されているZoomアカウント数と同じ数の会議を同時開催できます。各Zoomアカウントは1つの会議のみ開催可能です。

#### Q2: 予約のキャンセルはできますか？
A2: 現在のバージョンでは、システム管理者による手動キャンセルが必要です。

#### Q3: 会議時間を延長できますか？
A3: 予約時に設定した時間での自動終了となります。延長が必要な場合は、新たに予約を作成してください。

#### Q4: 外部ユーザーは何度でも予約できますか？
A4: 公開URLを知っていれば何度でも予約可能です。制限が必要な場合は、許可メールドメインを設定してください。

#### Q5: 過去の予約履歴は確認できますか？
A5: 会議予約ページで過去の予約も含めて確認できます。

#### Q6: IPアドレス制限はどのように動作しますか？
A6: 許可IPアドレスリストに登録されたIPアドレス（CIDR記法）からのみアクセスが可能になります。管理者機能と公開予約の両方に適用されます。

#### Q7: IPv6アドレスは使用できますか？
A7: はい、IPv6アドレスもCIDR記法で設定可能です（例: 2001:db8::/32）。

#### Q8: 外出先からアクセスできなくなりました
A8: IPアドレス制限が有効になっている可能性があります。VPN接続するか、システム管理者に現在のIPアドレスの追加を依頼してください。

#### Q9: Zoomトークンのセキュリティは大丈夫ですか？
A9: OAuth認証トークンは自動的に暗号化されてデータベースに保存されるため、安全に管理されています。

---

## サポート・お問い合わせ

システムに関するご質問やトラブルが発生した場合は、システム管理者までお問い合わせください。

### 連絡時に必要な情報
- 発生した問題の詳細
- エラーメッセージ（表示された場合）
- 操作手順
- 使用環境（ブラウザ、OS等）

---